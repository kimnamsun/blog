<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1b6c31dffc5e101727a3.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}*{box-sizing:border-box}html{margin:0;padding:0;height:100%}body{font-size:14px;line-height:20px;font-weight:400;font-style:normal;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Ubuntu,Cantarell,Roboto,Helvetica,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;color:#333;padding:20px;margin:0;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}@media (min-width:992px){body{padding:35px 50px}}h1,h2,h3,h4,h5,h6{margin-bottom:1rem;line-height:1.25;color:#313131}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1.1rem;font-size:1.1rem}img{max-width:100%}a{color:inherit;text-decoration:none;border-bottom:1px solid #555}a.image{display:block;text-align:center;border:0;border-radius:5px;margin:30px 0}mark{background:#fffc76;padding:0 5px}blockquote{border-left:5px solid #ccc;margin:40px 0;padding:5px 30px;background:#eee}.logo{position:relative;margin:0 auto 35px}.logo,.logo a{text-align:center}.logo a{background:#ddd url(data:image/png;base64,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);color:#000;text-decoration:none;font-weight:700;height:100px;width:100px;font-size:1.5em;border-radius:100%;display:inline-block;line-height:100px;border:5px solid #fff;box-sizing:border-box}.logo a:focus,.logo a:hover{background:#f14e32}.logo a:focus+.logo-prompt,.logo a:hover+.logo-prompt{display:inline-block!important}@media (max-width:480px){.logo a:focus+.logo-prompt,.logo a:hover+.logo-prompt{display:none!important}}.logo .logo-prompt{position:absolute;display:none;vertical-align:middle;padding:5px;border-radius:3px;background:#6768ab;margin-left:15px;color:#fff;font-size:.8235em;text-align:center;line-height:1.2;top:50%;margin-top:-10px}.logo .logo-prompt:before{content:"";border-color:transparent #6768ab;border-style:solid;border-width:5px 5px 5px 0;position:absolute;top:50%;left:-5px;margin-top:-5px}iframe{margin:45px 0!important}ol,ul{margin:20px 0}ol li,ul li{word-wrap:break-word}ol img,ul img{margin:40px 0;border-radius:5px}sup{vertical-align:top;position:relative;top:-.5em;margin-left:1px}time{color:#555}code{color:#f14e32;background:#eee;padding:2px 6px;font-size:13px}pre{display:block;margin-top:0;margin-bottom:1rem;font-size:.8rem;line-height:1.4;white-space:pre;overflow-x:auto;background-color:#f9f9f9;border:1px solid #ddd;padding:1rem}pre code{font-size:100%;color:inherit;background-color:transparent;padding:0}table{width:100%;table-layout:fixed;margin:45px 0}table thead{background:#f2f2f2}table th{text-align:left;padding:8px 10px;border-bottom:15px solid #fff}table td{padding:4px 0}iframe{width:100%}article{max-width:600px;margin:0 auto}article h1.title{line-height:1.4em;text-align:center;font-size:1.4em}article .divider{background:#ddd;background:linear-gradient(90deg,hsla(0,0%,100%,0),#ccc,hsla(0,0%,100%,0));height:1px;margin:2em 0}article .center{text-align:center;margin:0 auto}article hr{border:0;border-bottom:1px solid #000;margin:30px 0}article p{font-size:15px;line-height:1.9em;word-wrap:break-word}article .footnote{border:0;background-color:#0087be;color:#fff;padding-left:2px;padding-right:2px}article .footnotes{margin:50px auto;display:block;font-size:.8em;color:#666}article .footnotes p{line-height:1rem;font-weight:400}article .footnotes ol{margin:0;padding-left:10px}article .footnotes ol li{font-weight:700}article .footnotes .reversefootnote{border:0;color:#0087be}article a:hover{color:#6768ab;border-color:#6768ab}.back{text-align:center}.back a{text-decoration:none;margin:40px auto 0;display:inline-block;padding:10px;border:0}.back a:before{content:"<<";margin-right:5px;color:#000}.block{display:block}.footer,.page-navigation{text-align:center;max-width:600px;margin:0 auto;font-size:.8rem}.page-navigation{margin:50px auto 0}.page-navigation a{text-decoration:none;border-bottom:none}.page-navigation a,.page-navigation span{display:inline-block}.footer{margin-top:50px;color:#777}.footer a{border:none;font-weight:700}section{max-width:600px;margin:0 auto 50px}section ul{list-style:none;margin:0;padding:0}section ul li{margin:25px 0}section ul li .title{max-width:100%;word-wrap:normal!important}section ul li a{text-decoration:none;border:0;color:#000;box-sizing:border-box}section ul li .post-date{float:right;margin:0 0 0 20px}section ul li span{display:inline-block;color:#757575;letter-spacing:1px;text-transform:uppercase}@media (min-width:992px){section ul li a{border-bottom:2px solid transparent}section ul li a:hover{border-color:#6768ab}}@keyframes bounce{0%{-webkit-transform:translate3d(0,-1000px,0);transform:translate3d(0,-1000px,0)}60%{-webkit-transform:translate3d(0,25px,0);transform:translate3d(0,25px,0)}75%{-webkit-transform:translate3d(0,-10px,0);transform:translate3d(0,-10px,0)}90%{-webkit-transform:translate3d(0,5px,0);transform:translate3d(0,5px,0)}to{-webkit-transform:none;transform:none}}@-webkit-keyframes bounce{0%{-webkit-transform:translate3d(0,-1000px,0)}60%{-webkit-transform:translate3d(0,25px,0)}75%{-webkit-transform:translate3d(0,-10px,0)}90%{-webkit-transform:translate3d(0,5px,0)}to{-webkit-transform:none}}.highlight{margin:40px 0}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k,.highlight .o{font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc,.highlight .kd,.highlight .kp,.highlight .kr,.highlight .kt{font-weight:700}.highlight .kt{color:#458}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:teal}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne,.highlight .nf{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:700}.highlight .w{color:#bbb}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc,.highlight .vg,.highlight .vi{color:teal}.highlight .il{color:#099}</style><meta name="generator" content="Gatsby 3.1.0"/><title data-react-helmet="true">Intersection Observer API를 활용한 무한스크롤 | KIMNAMSUN</title><meta data-react-helmet="true" name="description" content="FrontEnd Developer KIMNAMSUN"/><meta data-react-helmet="true" property="og:title" content="Intersection Observer API를 활용한 무한스크롤"/><meta data-react-helmet="true" property="og:description" content="FrontEnd Developer KIMNAMSUN"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@kimnamsun"/><meta data-react-helmet="true" name="twitter:title" content="Intersection Observer API를 활용한 무한스크롤"/><meta data-react-helmet="true" name="twitter:description" content="FrontEnd Developer KIMNAMSUN"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=b817fa46da71352ddcb391b795a31e62" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b817fa46da71352ddcb391b795a31e62"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b817fa46da71352ddcb391b795a31e62"/><link as="script" rel="preload" href="/webpack-runtime-b3635455bfb311e2eb54.js"/><link as="script" rel="preload" href="/framework-4d381f39ea4418c7495f.js"/><link as="script" rel="preload" href="/app-cb3de1878a2644a8c2bf.js"/><link as="script" rel="preload" href="/commons-388aceb34b53794509e5.js"/><link as="script" rel="preload" href="/component---src-layouts-post-js-51e4e8dc9ae4d1b53b12.js"/><link as="fetch" rel="preload" href="/page-data/blog/2021-05-10/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2411212779.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="logo"><div><a href="/"><img src="https://avatars.githubusercontent.com/u/66931791?v=4" class="logo-avatar"/></a><span class="logo-prompt code">Home</span></div></header><div id="content"><article><div class="center"><h1 class="title">Intersection Observer API를 활용한 무한스크롤</h1><span class="code"><small>May 10, 2021</small></span></div><div class="divider"></div><div><p><img src="https://media.vlpt.us/images/nsunny0908/post/4b613a08-f328-453e-b7f3-0e92bf8634ee/May-09-2021%2018-07-31.gif"></p>
<blockquote>
<p>클론프로젝트를 하면서 꼭 한번 해보고 싶었던 무한 스크롤 기능과 로딩바 기능을 구현해보았다!</p>
</blockquote>
<h1>기존 scroll event의 문제점</h1>
<p>스크롤을 끊임없이 감지하고 동기적으로 실행되기 때문에 메인 스레드에 영향을 준다.
실제로 스크롤 이벤트로 무한스크롤기능을 구현할때의 상황.<br>
scroll이 맨 밑에 있을때 감지해주는 함수를 달아놨는데 스크롤이 계속 맨 밑에 머물러있을때 끊임없이 함수가 호출되고 있다.</p>
<h1>Intersection Observer API</h1>
<p>간단히 말하자면 타겟이 화면에 노출되었는 지의 여부를 관찰할 수 있는 API
교차되었을때 실행할 <code class="language-text">callback</code> 함수와 <code class="language-text">option</code>을 인자로 받는다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> options<span class="token punctuation">)</span></code></pre></div>
<h2>callback</h2>
<p>타겟 엘리먼트가 교차되었을 때 실행할 함수</p>
<h2>options</h2>
<p>observer 콜백이 호출되는 상황을 조작할 수 있다.</p>
<ul>
<li><code class="language-text">root</code><br>
교차 영역의 기준이 될 root 엘리먼트.<br>
기본값은 브라우저의 viewport</li>
<li><code class="language-text">rootMargin</code><br>
root엘리먼트의 margin값<br>
threshold<br>
타겟에 대한 교차 영역 비율<br>
0의 경우 : 타겟 엘리먼트가 교차영역에 진입했을 시점에 observer를 실행<br>
1의 경우 : 타켓 엘리먼트 전체가 교차영역에 들어왔을 때 observer를 실행</li>
</ul>
<h2>method</h2>
<ul>
<li>
<p>IntersectionObserver.observe(target)</p>
<ul>
<li>타겟 엘리먼트에 대한 IntersectionObserver를 등록 (관찰 시작)</li>
</ul>
</li>
<li>
<p>IntersectionObserver.unobserve(target)</p>
<ul>
<li>타겟 엘리먼트에 대한 관찰 중지</li>
</ul>
</li>
<li>
<p>IntersectionObserver.disconnect()</p>
<ul>
<li>모든 타겟 엘리먼트에 대한 관찰 중지</li>
</ul>
</li>
</ul>
<h1>React hook에 적용해보기</h1>
<p>우선 <code class="language-text">target</code>, 로딩중인지 아닌지를 판별해줄 <code class="language-text">isLoading</code>, 현재 아이템 갯수를 나타내는 <code class="language-text">itemCount</code>를 state로 지정해준다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>itemCount<span class="token punctuation">,</span> setItemCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>isLoading<span class="token punctuation">,</span> setIsLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> setTarget<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></code></pre></div>
<p>target에 변화가 있을때마다 실행해줄 <code class="language-text">useEffect</code>에 observer 객체를 선언한다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> observer
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token punctuation">{</span> threshold<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> observer <span class="token operator">&amp;&amp;</span> observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">callback</code>함수의 인자로 entry와 observer를 받는다.<br>
타겟의 교차 상태를 boolean값으로 반환하는 <code class="language-text">entry.isIntersecting</code>가 <code class="language-text">true</code>일때 list를 fetch하는 함수를 호출하고 <code class="language-text">itemCount</code>에 1을 더해 setState해준다.<br>
(난 한페이지당 1개의 리스트만 호출하고 스크롤이 끝에 다다랐을때 하나씩 더 보여주는 무한스크롤을 구현 예정이다.)</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>entry<span class="token punctuation">]</span><span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetchBidsLists</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">setItemCount</span><span class="token punctuation">(</span>itemCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>리스트를 fetch해오는 함수.
우선 <code class="language-text">isLoading</code>을 <code class="language-text">true</code>로 setState해주고, fetch를 통해 백엔드로부터 데이터를 받아온다.<br>
setTimeout을 통해 약간의 시간차를 줘 로딩바가 더 잘보일 수 있도록 했다.<br>
list의 갯수가 현재 <code class="language-text">itemCount</code>와 같으면 loading이 끝난것이기 때문에 다시 <code class="language-text">false</code>로 바꿔주었고, list를 <code class="language-text">itemCount</code>의 수만큼 slice해 setState해주었다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">fetchBidsLists</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">BIDS_API</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">bidsData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>bidsData<span class="token punctuation">.</span>auctions<span class="token punctuation">.</span>length <span class="token operator">===</span> itemCount<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">setBidsLists</span><span class="token punctuation">(</span>bidsData<span class="token punctuation">.</span>auctions<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> itemCount<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>마지막으로 컴포넌트가 언마운트될때 <code class="language-text">isLoading</code>을 <code class="language-text">false</code>로 setState해준다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div>
<p>로딩바부분.
<code class="language-text">isLoading</code>이 <code class="language-text">true</code>일때만 로딩바가 보여야하므로 조건부렌더링을 걸어주었고 setTarget을 <code class="language-text">forwardRef</code>로 지정해주었다.
<code class="language-text">forwardRef</code>는 React 컴포넌트에 ref prop을 넘겨서 그 내부에 있는 HTML 엘리먼트에 접근을 하게 해준다.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>
  isLoading <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Loading</span></span> <span class="token attr-name">forwardRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setTarget<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token punctuation">}</span></code></pre></div></div></article><div class="page-navigation code"><a class="prev" title="기술을 할 것인가, 예술을 할 것인가" href="/blog/2021-05-17/">&lt;&lt;</a><span> </span><a class="home" title="Back Home" href="/">Home</a><span> </span><a class="next" title="사진학도가 개발자가 된 이유" href="/blog/2020-12-24/">&gt;&gt;</a></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2021-05-10/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4099d26b1ad3d3492c2e.js"],"app":["/app-cb3de1878a2644a8c2bf.js"],"component---src-layouts-post-js":["/component---src-layouts-post-js-51e4e8dc9ae4d1b53b12.js"],"component---src-pages-404-js":["/component---src-pages-404-js-edfb3b9f7a0d03085fa2.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3d079decb8eeb376740e.js"]};/*]]>*/</script><script src="/polyfill-4099d26b1ad3d3492c2e.js" nomodule=""></script><script src="/component---src-layouts-post-js-51e4e8dc9ae4d1b53b12.js" async=""></script><script src="/commons-388aceb34b53794509e5.js" async=""></script><script src="/app-cb3de1878a2644a8c2bf.js" async=""></script><script src="/framework-4d381f39ea4418c7495f.js" async=""></script><script src="/webpack-runtime-b3635455bfb311e2eb54.js" async=""></script></body></html>